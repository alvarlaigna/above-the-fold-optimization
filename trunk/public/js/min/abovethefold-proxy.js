!function(e){var r,t,n=!1,o=!1,f=!1,i=!1,u=!1,s=!1,a=!1,l=!1,c=[],p=[],d=[],h={},v=[];e.ps=function(e){if(void 0===b)var b=!1;if(r=e.url||b,n=e.js||!1,o=e.css||!1,(f=e.cdn||!1)&&v.push(f),i=e.js_include||!1,u=e.js_exclude||!1,s=e.css_include||!1,a=e.css_exclude||!1,e.preload){l=!0;for(g=0;g<e.preload.length;g++)"regex"===e.preload[g][0]?(d.push([e.preload[g][2],e.preload[g][3],e.preload[g][1]]),e.preload[g][4]&&(h[e.preload[g][0]]=e.preload[g][4],-1===v.indexOf(e.preload[g][4])&&v.push(e.preload[g][4]))):(c.push(e.preload[g][0]),p.push(e.preload[g][1]),e.preload[g][4]&&(h[e.preload[g][0]]=e.preload[g][4],-1===v.indexOf(e.preload[g][4])&&v.push(e.preload[g][4])));t=e.base||!1}if(0===v.length)v=!1;else for(var m=v.length,g=0;g<m;g++)v[g]=j(v[g])};var b={Element:"undefined"!=typeof Element&&Element,Document:"undefined"!=typeof Document&&Document},m={append:{},insert:{}};for(var g in b)b.hasOwnProperty(g)&&b[g]&&(m.append[g]=b[g].prototype.appendChild,m.insert[g]=b[g].prototype.insertBefore);var O=document.createElement("a");O.href=document.location.href;var j=function(e){var r=document.createElement("a");return r.href=e,r},x=function(e,t){return"css"===t?r.replace("{PROXY:URL}",escape(e)).replace("{PROXY:TYPE}",escape(t)):"js"===t?r.replace("{PROXY:URL}",escape(e)).replace("{PROXY:TYPE}",escape(t)):void 0},y=function(r,n){if(l){var o=c.indexOf(r);if(o>-1)var f=p[o];else if(d.length>0)for(var i,u,s=d.length,a=0;a<s;a++){u=!1;try{i=new RegExp(d[a][0],d[a][1]||"")}catch(e){u=!0}if(!u&&i.test(r)){d[a][2]?f=d[a][2]:d[a][3]&&(r=d[a][3]);break}}if(f){if(void 0!==h[r])v=h[r];else var v=t;v+=f.substr(0,2)+"/",v+=f.substr(2,2)+"/",v+=f.substr(4,2)+"/",v+=f;if("js"===n){if(v+=".js",void 0!==e.csu){var b=j(v).href;v=e.csu(b)}}else"css"===n&&(v+=".css");return v}}if("js"===n&&void 0!==e.csu){var m=j(r).href;if((r=e.csu(m))!==m)return r}return x(r,n)},P=function(e,r){var t="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===t.protocol)return!1;if(v&&!0!==r)for(var n=v.length,o=0;o<n;o++)if(-1!==t.href.indexOf(v[o].href))return!1;return t.host!==O.host},C=function(e){var r="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===r.protocol)return!0;if(i){for(var t=!1,n=i.length,o=0;o<n;o++)if(-1!==r.href.indexOf(i[o])){t=!0;break}if(!t)return!0}if(u)for(var n=u.length,o=0;o<n;o++)if(-1!==r.href.indexOf(u[o]))return!0;return!1},E=function(e){var r="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===r.protocol)return!1;if(v)for(var t=v.length,n=0;n<t;n++)if(-1!==r.href.indexOf(v[n].href))return!1;return r.host!==O.host},R=function(e){var r="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===r.protocol)return!0;if(s){for(var t=!1,n=s.length,o=0;o<n;o++)if(-1!==r.href.indexOf(s[o])){t=!0;break}if(!t)return!0}if(a)for(var n=a.length,o=0;o<n;o++)if(-1!==r.href.indexOf(a[o]))return!0;return!1},w=function(r){if(r.nodeName)if("SCRIPT"===r.nodeName.toUpperCase()){if(!n)return!1;if("abtf"===r.getAttribute("rel"))return r.removeAttribute("rel"),!1;if(r.src){t=j(r.src);if(C(t))return!1;if(!P(t)){if(void 0!==e.csu){if("blob:"===t.protocol)return!1;url=e.csu(t.href),url!==t.href&&(r.src=url)}return!1}return"js"}}else if("LINK"===r.nodeName.toUpperCase()&&"stylesheet"===r.rel.toLowerCase()){if(!o)return!1;if("abtf"===r.getAttribute("rel"))return r.removeAttribute("rel"),!1;if(r.href){var t=j(r.href);return!R(t)&&(!!E(t)&&"css")}}return!1},Y=function(e){var r=w(e);if(!r)return!1;var t=j("css"===r?e.href:e.src).href,n=y(t,r);"css"===r?e.href=n:"js"===r&&(e.src=n)},A={appendChild:function(e,r){return Y(r),m.append[e].call(this,r)},insertBefore:function(e,r,t){return Y(r),m.insert[e].call(this,r,t)}};for(var g in b)b.hasOwnProperty(g)&&b[g]&&function(e){b[e].prototype.appendChild=function(r){return A.appendChild.call(this,e,r)},b[e].prototype.insertBefore=function(r,t){return A.insertBefore.call(this,e,r,t)}}(g);e.pxs=function(e){return P(e,!0)?x(e,"js"):e}}(window.Abtf);